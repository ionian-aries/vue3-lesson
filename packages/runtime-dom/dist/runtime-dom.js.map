{
  "version": 3,
  "sources": ["../src/nodeOps.ts", "../src/modules/patchAttr.ts", "../src/modules/patchClass.ts", "../src/modules/patchEvent.ts", "../src/modules/patchStyle.ts", "../src/patchProp.ts", "../../shared/src/index.ts", "../../runtime-core/src/createVnode.ts", "../../runtime-core/src/h.ts", "../../runtime-core/src/renderer.ts", "../src/index.ts"],
  "sourcesContent": ["// \u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u589E\u5220\u6539\u67E5\n\nexport const nodeOps = {\n  // \u5982\u679C\u7B2C\u4E09\u4E2A\u5143\u7D20\u4E0D\u4F20\u9012 === appendChild\n  insert: (el, parent, anchor) => parent.insertBefore(el, anchor || null),\n  // appendChild  parent.insertBefore(el,null)\n  remove(el) {\n    // \u79FB\u9664dom\u5143\u7D20\n    const parent = el.parentNode;\n    parent && parent.removeChild(el);\n  },\n  createElement: (type) => document.createElement(type),\n  createText: (text) => document.createTextNode(text),\n  setText: (node, text) => (node.nodeValue = text), // \u8BBE\u7F6E\u6587\u672C\n  setElementText: (el, text) => (el.textContent = text),\n  parentNode: (node) => node.parentNode,\n  nextSibling: (node) => node.nextSibling,\n};\n", "export default function patchAttr(el, key, value) {\n  if (value == null) {\n    el.removeAttribute(key);\n  } else {\n    el.setAttribute(key, value);\n  }\n}\n", "export default function patchClass(el, value) {\n  if (value == null) {\n    // \u79FB\u9664class\n    el.removeAttribute(\"class\");\n  } else {\n    el.className = value;\n  }\n}\n", "function createInvoker(value) {\n  const invoker = (e) => invoker.value(e);\n  invoker.value = value; // \u66F4\u6539invoker\u4E2D\u7684value\u5C5E\u6027 \u53EF\u4EE5\u4FEE\u6539\u5BF9\u5E94\u7684\u8C03\u7528\u51FD\u6570\n  return invoker;\n}\nexport default function patchEvent(el, name, nextValue) {\n  // vue_event_invoker\n  const invokers = el._vei || (el._vei = {});\n  const eventName = name.slice(2).toLowerCase();\n  const exisitingInvokers = invokers[name]; // \u662F\u5426\u5B58\u5728\u540C\u540D\u7684\u4E8B\u4EF6\u7ED1\u5B9A\n  if (nextValue && exisitingInvokers) {\n    // \u4E8B\u4EF6\u6362\u7ED1\u5B9A\n    return (exisitingInvokers.value = nextValue);\n  }\n  if (nextValue) {\n    const invoker = (invokers[name] = createInvoker(nextValue)); // \u521B\u5EFA\u4E00\u4E2A\u8C03\u7528\u51FD\u6570\uFF0C\u5E76\u4E14\u5185\u90E8\u4F1A\u6267\u884CnextValue\n    return el.addEventListener(eventName, invoker);\n  }\n  if (exisitingInvokers) {\n    // \u73B0\u5728\u6CA1\u6709\uFF0C\u4EE5\u524D\u6709\n    el.removeEventListener(eventName, exisitingInvokers);\n    invokers[name] = undefined;\n  }\n}\n", "export default function patchStyle(el, prevValue, nextValue) {\n  let style = el.style;\n  for (let key in nextValue) {\n    style[key] = nextValue[key]; // \u65B0\u6837\u5F0F\u8981\u5168\u90E8\u751F\u6548\n  }\n  if (prevValue) {\n    for (let key in prevValue) {\n      // \u770B\u4EE5\u524D\u7684\u5C5E\u6027\uFF0C\u73B0\u5728\u6709\u6CA1\u6709\uFF0C\u5982\u679C\u6CA1\u6709\u5220\u9664\u6389\n      if (nextValue[key] == null) {\n        style[key] = null;\n      }\n    }\n  }\n}\n", "// \u4E3B\u8981\u662F\u5BF9\u8282\u70B9\u5143\u7D20\u7684\u5C5E\u6027\u64CD\u4F5C class style event \u666E\u901A\u5C5E\u6027\n\nimport patchAttr from \"./modules/patchAttr\";\nimport patchClass from \"./modules/patchClass\";\nimport patchEvent from \"./modules/patchEvent\";\nimport patchStyle from \"./modules/patchStyle\";\n\n// diff\n\n// div onClick=fn1     div click=fn2\n\n// div onClick=()=>invoker.value()\n\nexport default function patchProp(el, key, prevValue, nextValue) {\n  if (key === \"class\") {\n    return patchClass(el, nextValue);\n  } else if (key === \"style\") {\n    return patchStyle(el, prevValue, nextValue);\n  } else if (/^on[^a-z]/.test(key)) {\n    // el.addEventerListener(key,prevValue)  // ()=> nextValue()\n    return patchEvent(el, key, nextValue);\n  } else {\n    return patchAttr(el, key, nextValue);\n  }\n}\n", "export function isObject(value) {\n  return typeof value === \"object\" && value !== null;\n}\n\nexport function isFunction(value) {\n  return typeof value == \"function\";\n}\nexport function isString(value) {\n  return typeof value == \"string\";\n}\nexport * from \"./shapeFlags\";\n", "import { ShapeFlags, isString } from \"@vue/shared\";\n\nexport function isVnode(value) {\n  return value?.__v_isVnode;\n}\n\nexport function createVnode(type, props, children?) {\n  const shapeFlag = isString(type) ? ShapeFlags.ELEMENT : 0;\n  const vnode = {\n    __v_isVnode: true,\n    type,\n    props,\n    children,\n    key: props?.key, // diff\u7B97\u6CD5\u540E\u9762\u9700\u8981\u7684key\n    el: null, // \u865A\u62DF\u8282\u70B9\u9700\u8981\u5BF9\u5E94\u7684\u771F\u5B9E\u8282\u70B9\u662F\u8C01\n    shapeFlag,\n  };\n\n  if (children) {\n    if (Array.isArray(children)) {\n      vnode.shapeFlag |= ShapeFlags.ARRAY_CHILDREN;\n    } else {\n      children = String(children);\n      vnode.shapeFlag |= ShapeFlags.TEXT_CHILDREN;\n    }\n  }\n  return vnode;\n}\n", "import { isObject } from \"@vue/shared\";\nimport { createVnode, isVnode } from \"./createVnode\";\n\nexport function h(type, propsOrChildren?, children?) {\n  let l = arguments.length;\n  if (l === 2) {\n    // h(h1,\u865A\u62DF\u8282\u70B9|\u5C5E\u6027)\n    if (isObject(propsOrChildren) && !Array.isArray(propsOrChildren)) {\n      // \u865A\u62DF\u8282\u70B9\n      if (isVnode(propsOrChildren)) {\n        // h('div',h('a'))\n        return createVnode(type, null, [propsOrChildren]);\n      } else {\n        // \u5C5E\u6027\n        return createVnode(type, propsOrChildren);\n      }\n    }\n    // \u513F\u5B50 \u662F\u6570\u7EC4 | \u6587\u672C\n    return createVnode(type, null, propsOrChildren);\n  } else {\n    if (l > 3) {\n      children = Array.from(arguments).slice(2);\n    }\n    if (l == 3 && isVnode(children)) {\n      children = [children];\n    }\n    // == 3  | == 1\n    return createVnode(type, propsOrChildren, children);\n  }\n}\n", "import { ShapeFlags } from \"@vue/shared\";\n\nexport function createRenderer(renderOptions) {\n  // core\u4E2D\u4E0D\u5173\u5FC3\u5982\u4F55\u6E32\u67D3\n\n  const {\n    insert: hostInsert,\n    remove: hostRemove,\n    createElement: hostCreateElement,\n    createText: hostCreateText,\n    setText: hostSetText,\n    setElementText: hostSetElementText,\n    parentNode: hostParentNode,\n    nextSibling: hostNextSibling,\n    patchProp: hostPatchProp,\n  } = renderOptions;\n\n  const mountChildren = (children, container) => {\n    for (let i = 0; i < children.length; i++) {\n      //  children[i] \u53EF\u80FD\u662F\u7EAF\u6587\u672C\u5143\u7D20\n      patch(null, children[i], container);\n    }\n  };\n  const mountElement = (vnode, container) => {\n    const { type, children, props, shapeFlag } = vnode;\n    let el = hostCreateElement(type);\n    if (props) {\n      for (let key in props) {\n        hostPatchProp(el, key, null, props[key]);\n      }\n    }\n    // 9 & 8 > 0 \u8BF4\u660E\u513F\u5B50\u662F\u6587\u672C\u5143\u7D20\n    if (shapeFlag & ShapeFlags.TEXT_CHILDREN) {\n      hostSetElementText(el, children);\n    } else if (shapeFlag & ShapeFlags.ARRAY_CHILDREN) {\n      mountChildren(children, el);\n    }\n    hostInsert(el, container);\n    // hostCreateElement()\n  };\n\n  // \u6E32\u67D3\u8D70\u8FD9\u91CC\uFF0C\u66F4\u65B0\u4E5F\u8D70\u8FD9\u91CC\n  const patch = (n1, n2, container) => {\n    if (n1 == n2) {\n      // \u4E24\u6B21\u6E32\u67D3\u540C\u4E00\u4E2A\u5143\u7D20\u76F4\u63A5\u8DF3\u8FC7\u5373\u53EF\n      return;\n    }\n\n    if (n1 === null) {\n      // \u521D\u59CB\u5316\u64CD\u4F5C\n      mountElement(n2, container);\n    }\n  };\n\n  // \u591A\u6B21\u8C03\u7528render \u4F1A\u8FDB\u884C\u865A\u62DF\u8282\u70B9\u7684\u6BD4\u8F83\uFF0C\u5728\u8FDB\u884C\u66F4\u65B0\n  const render = (vnode, container) => {\n    // \u5C06\u865A\u62DF\u8282\u70B9\u53D8\u6210\u771F\u5B9E\u8282\u70B9\u8FDB\u884C\u6E32\u67D3\n    patch(container._vnode || null, vnode, container);\n    container._vnode = vnode;\n  };\n  return {\n    render,\n  };\n}\n", "import { nodeOps } from \"./nodeOps\";\nimport patchProp from \"./patchProp\";\n\nimport { createRenderer } from \"@vue/runtime-core\";\n// \u5C06\u8282\u70B9\u64CD\u4F5C\u548C\u5C5E\u6027\u64CD\u4F5C\u5408\u5E76\u5728\u4E00\u8D77\nconst renderOptions = Object.assign({ patchProp }, nodeOps);\n\n// render\u65B9\u6CD5\u91C7\u7528domapi\u6765\u8FDB\u884C\u6E32\u67D3\nexport const render = (vnode, container) => {\n  return createRenderer(renderOptions).render(vnode, container);\n};\n\nexport * from \"@vue/runtime-core\";\n"],
  "mappings": "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",
  "names": ["renderOptions", "render"]
}
